# Path to your oh-my-zsh configuration.
export ZSH=$HOME/.oh-my-zsh

# Set name of the theme to load.
# Look in ~/.oh-my-zsh/themes/
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
export ZSH_THEME="nicoulaj"
# export ZSH_THEME="random"

# Set to this to use case-sensitive completion
# export CASE_SENSITIVE="true"

# Comment this out to disable weekly auto-update checks
# export DISABLE_AUTO_UPDATE="true"

# Uncomment following line if you want to disable colors in ls
# export DISABLE_LS_COLORS="true"

# Uncomment following line if you want to disable autosetting terminal title.
# export DISABLE_AUTO_TITLE="true"

# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Example format: plugins=(rails git textmate ruby lighthouse)
# plugins=(git)

source $ZSH/oh-my-zsh.sh

# I FUCKING HATE AUTOCORRECT
unsetopt correct_all

# Load RVM
# [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"

# Load scripts
# source "$HOME/.scripts/publish_to.sh"
source "$HOME/.zshrc.local"

export APPLEDOC_TEMPLATE_PATH="$HOME/Development/appledoc/Templates"
export EDITOR="vim -c 'startinsert'" # Start in insert mode
export PGOPTIONS='-c client_min_messages=WARNING'

export JAVA_HOME="/System/Library/Frameworks/JavaVM.framework/Home"
# export EC2_PRIVATE_KEY="$(/bin/ls $HOME/.ec2/pk-*.pem)"
# export EC2_CERT="$(/bin/ls $HOME/.ec2/cert-*.pem)"
# export EC2_AMITOOL_HOME="/usr/local/Cellar/ec2-ami-tools/1.3-45758/jars"

# Random shortcuts
alias v='vim'
alias t='tree -C' # Colors by default

# Development
alias be='bundle exec'
alias boom!="git pull --rebase && be rake db:migrate && be rake && git push"
alias boom="boom!"
alias gogo='if [ -d log ]; then rm -rf log/*.log; fi; bundle && be rake db:migrate && if [ -f Procfile.development ] ; then be foreman start -f Procfile.development; else; be foreman start; fi'
alias testit='if [ -d coverage ]; then rm -rf coverage; fi; bundle && be rake db:migrate && be rake db:test:prepare && be rake'

# Rails 3 aliases, backwards-compatible with Rails 2.
function _rails_command () {
  if [ -e "script/server" ]; then
    ruby script/$@
  else
    ruby script/rails $@
  fi
}

alias rc='_rails_command console'
alias rd='_rails_command destroy'
alias rdb='_rails_command dbconsole'
alias rdbm='rake db:migrate db:test:clone'
alias rg='_rails_command generate'
alias rp='_rails_command plugin'
alias ru='_rails_command runner'
alias rs='_rails_command server'
alias rsd='_rails_command server --debugger'
alias devlog='tail -f log/development.log'
alias rdm='rake db:migrate'
alias rdr='rake db:rollback'

# Git aliases
alias gaa="git add -A"
alias gd="git diff"
alias gds="git diff --staged"
alias gs="git status --short"
alias glg="git log --graph --pretty=\"format:%C(yellow)%h%Cblue%d%Creset %s %C(white) %an, %ar%Creset\""
alias gm='git merge --no-ff'
alias gmf='git merge --ff-only'
alias grr='git reset HEAD --hard; git clean -fn'
alias glp='gl && gp'
alias gsd='gds'
alias cdg='cd $(git rev-parse --show-cdup)'

# Aliases
alias g='git'
alias gst='git status'
alias gl='git smart-log'
alias gup='git smart-pull'
alias gp='git push'
alias gc='git commit -v'
alias gca='git commit -v -a'
alias gco='git checkout'
alias gcm='git checkout master'
alias gb='git branch'
alias gba='git branch -a'
alias gcount='git shortlog -sn'
alias gcp='git cherry-pick'
alias glg='git log --stat --max-count=5'
alias glgg='git log --graph --max-count=5'
alias gss='git status -s'
alias ga='git add'
alias gm='git smart-merge'
alias grh='git reset HEAD'
alias grhh='git reset HEAD --hard'

# Ctags
alias ctagsit='ctags -R --exclude=.git --exclude=log --exclude=coverage *'

# Make the rubies fasterer
export RUBY_HEAP_MIN_SLOTS=1000000
export RUBY_HEAP_SLOTS_INCREMENT=1000000
export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
export RUBY_GC_MALLOC_LIMIT=1000000000
export RUBY_HEAP_FREE_MIN=500000

# I can support SSL
export DEVELOPMENT_SSL_ENABLED=true

# Autojump
if [ -f `brew --prefix`/etc/autojump ]; then
  . `brew --prefix`/etc/autojump
fi

# Hub alias
eval "$(hub alias -s)"
